<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confirmación de Reserva - Jaguar Expeditions</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="responsive.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        .confirmacion-container {
            max-width: 800px;
            margin: 120px auto 50px;
            padding: 20px;
            text-align: center;
        }
        
        .exito-icono {
            font-size: 80px;
            color: #28a745;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .confirmacion-titulo {
            font-size: 32px;
            color: #333;
            margin-bottom: 20px;
            font-weight: 600;
        }
        
        .confirmacion-mensaje {
            font-size: 18px;
            color: #666;
            margin-bottom: 40px;
            line-height: 1.6;
        }
        
        .detalles-reserva {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            text-align: left;
        }
        
        .detalle-grupo {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        
        .detalle-grupo:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        
        .detalle-titulo {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .detalle-lista {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .detalle-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
        }
        
        .detalle-label {
            font-weight: 500;
            color: #666;
        }
        
        .detalle-valor {
            font-weight: 600;
            color: #333;
        }
        
        .codigo-reserva {
            background: var(--color-primario);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            font-size: 24px;
            font-weight: bold;
            letter-spacing: 2px;
            margin: 20px 0;
            display: inline-block;
        }
        
        .acciones-confirmacion {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .btn-accion {
            padding: 15px 25px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            text-decoration: none;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .btn-primary {
            background: var(--color-primario);
            color: white;
        }
        
        .btn-primary:hover {
            background: #e6a800;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }
        
        .btn-outline {
            background: transparent;
            color: var(--color-primario);
            border: 2px solid var(--color-primario);
        }
        
        .btn-outline:hover {
            background: var(--color-primario);
            color: white;
        }
        
        .info-adicional {
            background: #e8f4fd;
            border-left: 4px solid var(--color-primario);
            padding: 20px;
            border-radius: 0 10px 10px 0;
            margin: 30px 0;
            text-align: left;
        }
        
        .info-adicional h4 {
            color: #333;
            margin-bottom: 10px;
        }
        
        .info-adicional ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .info-adicional li {
            margin-bottom: 5px;
            color: #666;
        }
        
        .compartir-redes {
            margin-top: 30px;
        }
        
        .compartir-titulo {
            font-size: 16px;
            margin-bottom: 15px;
            color: #666;
        }
        
        .redes-sociales {
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        
        .red-social {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-decoration: none;
            font-size: 18px;
            transition: transform 0.3s ease;
        }
        
        .red-social:hover {
            transform: scale(1.1);
        }
        
        .facebook { background: #3b5998; }
        .twitter { background: #1da1f2; }
        .whatsapp { background: #25d366; }
        .instagram { background: #e4405f; }
        
        .loading {
            display: none;
            text-align: center;
            padding: 50px;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--color-primario);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
            .confirmacion-container {
                margin-top: 100px;
                padding: 10px;
            }
            
            .confirmacion-titulo {
                font-size: 24px;
            }
            
            .detalle-lista {
                grid-template-columns: 1fr;
            }
            
            .acciones-confirmacion {
                grid-template-columns: 1fr;
            }
            
            .codigo-reserva {
                font-size: 18px;
                padding: 12px 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <img src="img/logo.jpeg" alt="Jaguar Expeditions">
                <span>Jaguar Expeditions</span>
            </div>
            
            <nav class="nav">
                <a href="index.html">Inicio</a>
                <a href="tours.html">Tours</a>
                <a href="galeria.html">Galería</a>
                <a href="nosotros.html">Nosotros</a>
                <a href="preguntas.html">FAQ</a>
                <a href="contacto.html">Contacto</a>
            </nav>
            
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </header>

    <!-- Loading -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
        <p>Cargando información de tu reserva...</p>
    </div>

    <!-- Contenido principal -->
    <main class="confirmacion-container" id="contenido-principal" style="display: none;">
        <div class="exito-icono">
            <i class="fas fa-check-circle"></i>
        </div>
        
        <h1 class="confirmacion-titulo">¡Reserva Confirmada!</h1>
        
        <p class="confirmacion-mensaje">
            ¡Felicitaciones! Tu reserva ha sido procesada exitosamente. 
            Hemos enviado una confirmación a tu email con todos los detalles.
        </p>
        
        <div class="codigo-reserva" id="codigo-reserva">
            <!-- Se cargará dinámicamente -->
        </div>
        
        <div class="detalles-reserva" id="detalles-reserva">
            <!-- Los detalles se cargarán dinámicamente -->
        </div>
        
        <div class="info-adicional">
            <h4><i class="fas fa-info-circle"></i> Información importante</h4>
            <ul>
                <li>Te contactaremos 24-48 horas antes del tour para confirmar el punto de encuentro.</li>
                <li>Si necesitas cancelar, hazlo con al menos 7 días de anticipación para reembolso completo.</li>
                <li>Lleva ropa cómoda, protector solar y una cámara para capturar los mejores momentos.</li>
                <li>El tour incluye guía especializado en español e inglés.</li>
                <li>En caso de mal tiempo, te contactaremos para reprogramar sin costo adicional.</li>
            </ul>
        </div>
        
        <div class="acciones-confirmacion">
            <a href="tours.html" class="btn-accion btn-secondary">
                <i class="fas fa-search"></i> Ver más tours
            </a>
            
            <button onclick="descargarPDF()" class="btn-accion btn-outline">
                <i class="fas fa-download"></i> Descargar PDF
            </button>
            
            <button onclick="compartirReserva()" class="btn-accion btn-primary">
                <i class="fas fa-share"></i> Compartir reserva
            </button>
            
            <a href="contacto.html" class="btn-accion btn-outline">
                <i class="fas fa-envelope"></i> Contactar soporte
            </a>
        </div>
        
        <div class="compartir-redes">
            <div class="compartir-titulo">¡Comparte tu aventura!</div>
            <div class="redes-sociales">
                <a href="#" class="red-social facebook" onclick="compartirFacebook()">
                    <i class="fab fa-facebook-f"></i>
                </a>
                <a href="#" class="red-social twitter" onclick="compartirTwitter()">
                    <i class="fab fa-twitter"></i>
                </a>
                <a href="#" class="red-social whatsapp" onclick="compartirWhatsApp()">
                    <i class="fab fa-whatsapp"></i>
                </a>
                <a href="#" class="red-social instagram" onclick="abrirInstagram()">
                    <i class="fab fa-instagram"></i>
                </a>
            </div>
        </div>
    </main>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="script.js"></script>
    <script>
        let reservaData = null;

        $(document).ready(function() {
            cargarDatosReserva();
        });

        function cargarDatosReserva() {
            const urlParams = new URLSearchParams(window.location.search);
            const reservaId = urlParams.get('reserva');
            
            if (!reservaId) {
                mostrarError('No se encontró el ID de la reserva');
                return;
            }
            
            // Simular carga de datos (en producción vendría de la API)
            setTimeout(() => {
                // Datos de ejemplo
                reservaData = {
                    id: reservaId,
                    codigo: 'JE2024123456',
                    tour: {
                        nombre: 'Expedición Río Amazonas',
                        duracion: '3 días / 2 noches',
                        precio: 299.00
                    },
                    fecha: '2024-09-15',
                    cliente: {
                        nombre: 'Juan',
                        apellido: 'Pérez',
                        email: 'juan.perez@email.com',
                        telefono: '+51 999 123 456',
                        pais: 'Perú'
                    },
                    personas: {
                        adultos: 2,
                        ninos: 1,
                        bebes: 0,
                        total: 3
                    },
                    precios: {
                        subtotal: 627.30,
                        impuestos: 112.91,
                        total: 740.21
                    },
                    estado: 'Confirmada',
                    metodoPago: 'Stripe',
                    fechaCreacion: '2024-08-24 15:30:00'
                };
                
                mostrarDatosReserva();
            }, 1500);
        }

        function mostrarDatosReserva() {
            $('#loading').hide();
            $('#contenido-principal').show();
            
            // Mostrar código de reserva
            $('#codigo-reserva').text(reservaData.codigo);
            
            // Construir detalles
            const detallesHtml = `
                <div class="detalle-grupo">
                    <div class="detalle-titulo">
                        <i class="fas fa-map-marked-alt"></i>
                        Información del Tour
                    </div>
                    <div class="detalle-lista">
                        <div class="detalle-item">
                            <span class="detalle-label">Tour:</span>
                            <span class="detalle-valor">${reservaData.tour.nombre}</span>
                        </div>
                        <div class="detalle-item">
                            <span class="detalle-label">Duración:</span>
                            <span class="detalle-valor">${reservaData.tour.duracion}</span>
                        </div>
                        <div class="detalle-item">
                            <span class="detalle-label">Fecha:</span>
                            <span class="detalle-valor">${formatearFecha(reservaData.fecha)}</span>
                        </div>
                        <div class="detalle-item">
                            <span class="detalle-label">Estado:</span>
                            <span class="detalle-valor" style="color: #28a745;">${reservaData.estado}</span>
                        </div>
                    </div>
                </div>
                
                <div class="detalle-grupo">
                    <div class="detalle-titulo">
                        <i class="fas fa-user"></i>
                        Información del Cliente
                    </div>
                    <div class="detalle-lista">
                        <div class="detalle-item">
                            <span class="detalle-label">Nombre:</span>
                            <span class="detalle-valor">${reservaData.cliente.nombre} ${reservaData.cliente.apellido}</span>
                        </div>
                        <div class="detalle-item">
                            <span class="detalle-label">Email:</span>
                            <span class="detalle-valor">${reservaData.cliente.email}</span>
                        </div>
                        <div class="detalle-item">
                            <span class="detalle-label">Teléfono:</span>
                            <span class="detalle-valor">${reservaData.cliente.telefono}</span>
                        </div>
                        <div class="detalle-item">
                            <span class="detalle-label">País:</span>
                            <span class="detalle-valor">${reservaData.cliente.pais}</span>
                        </div>
                    </div>
                </div>
                
                <div class="detalle-grupo">
                    <div class="detalle-titulo">
                        <i class="fas fa-users"></i>
                        Personas
                    </div>
                    <div class="detalle-lista">
                        <div class="detalle-item">
                            <span class="detalle-label">Adultos:</span>
                            <span class="detalle-valor">${reservaData.personas.adultos}</span>
                        </div>
                        <div class="detalle-item">
                            <span class="detalle-label">Niños:</span>
                            <span class="detalle-valor">${reservaData.personas.ninos}</span>
                        </div>
                        <div class="detalle-item">
                            <span class="detalle-label">Bebés:</span>
                            <span class="detalle-valor">${reservaData.personas.bebes}</span>
                        </div>
                        <div class="detalle-item">
                            <span class="detalle-label">Total:</span>
                            <span class="detalle-valor">${reservaData.personas.total}</span>
                        </div>
                    </div>
                </div>
                
                <div class="detalle-grupo">
                    <div class="detalle-titulo">
                        <i class="fas fa-credit-card"></i>
                        Información de Pago
                    </div>
                    <div class="detalle-lista">
                        <div class="detalle-item">
                            <span class="detalle-label">Subtotal:</span>
                            <span class="detalle-valor">$${reservaData.precios.subtotal.toFixed(2)}</span>
                        </div>
                        <div class="detalle-item">
                            <span class="detalle-label">Impuestos:</span>
                            <span class="detalle-valor">$${reservaData.precios.impuestos.toFixed(2)}</span>
                        </div>
                        <div class="detalle-item">
                            <span class="detalle-label">Método de pago:</span>
                            <span class="detalle-valor">${reservaData.metodoPago}</span>
                        </div>
                        <div class="detalle-item" style="border-top: 2px solid var(--color-primario); padding-top: 10px; font-size: 18px;">
                            <span class="detalle-label"><strong>Total Pagado:</strong></span>
                            <span class="detalle-valor" style="color: var(--color-primario);"><strong>$${reservaData.precios.total.toFixed(2)}</strong></span>
                        </div>
                    </div>
                </div>
            `;
            
            $('#detalles-reserva').html(detallesHtml);
        }

        function mostrarError(mensaje) {
            $('#loading').hide();
            $('#contenido-principal').html(`
                <div style="text-align: center; padding: 50px;">
                    <i class="fas fa-exclamation-triangle" style="font-size: 60px; color: #dc3545; margin-bottom: 20px;"></i>
                    <h2 style="color: #dc3545;">Error</h2>
                    <p>${mensaje}</p>
                    <a href="tours.html" class="btn-accion btn-primary">Volver a tours</a>
                </div>
            `).show();
        }

        function formatearFecha(fecha) {
            const fechaObj = new Date(fecha);
            const opciones = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            return fechaObj.toLocaleDateString('es-ES', opciones);
        }

        function descargarPDF() {
            // Implementar descarga de PDF
            alert('Funcionalidad de descarga PDF en desarrollo');
        }

        function compartirReserva() {
            if (navigator.share) {
                navigator.share({
                    title: 'Mi reserva en Jaguar Expeditions',
                    text: `¡Acabo de reservar el tour "${reservaData.tour.nombre}" para el ${formatearFecha(reservaData.fecha)}!`,
                    url: window.location.href
                });
            } else {
                // Fallback para navegadores que no soportan Web Share API
                const url = encodeURIComponent(window.location.href);
                const texto = encodeURIComponent(`¡Acabo de reservar el tour "${reservaData.tour.nombre}"!`);
                
                const opciones = {
                    'WhatsApp': `https://wa.me/?text=${texto}%20${url}`,
                    'Facebook': `https://www.facebook.com/sharer/sharer.php?u=${url}`,
                    'Twitter': `https://twitter.com/intent/tweet?text=${texto}&url=${url}`,
                    'Email': `mailto:?subject=Mi reserva en Jaguar Expeditions&body=${texto} ${decodeURIComponent(url)}`
                };
                
                let html = '<div style="text-align: center;"><h3>Compartir en:</h3>';
                for (let [red, enlace] of Object.entries(opciones)) {
                    html += `<a href="${enlace}" target="_blank" style="display: inline-block; margin: 10px; padding: 10px 20px; background: var(--color-primario); color: white; text-decoration: none; border-radius: 5px;">${red}</a>`;
                }
                html += '</div>';
                
                const ventana = window.open('', '_blank', 'width=400,height=300');
                ventana.document.write(html);
            }
        }

        function compartirFacebook() {
            const url = encodeURIComponent(window.location.href);
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank');
        }

        function compartirTwitter() {
            const url = encodeURIComponent(window.location.href);
            const texto = encodeURIComponent(`¡Acabo de reservar una aventura increíble con @JaguarExpeditions!`);
            window.open(`https://twitter.com/intent/tweet?text=${texto}&url=${url}`, '_blank');
        }

        function compartirWhatsApp() {
            const texto = encodeURIComponent(`¡Hola! Acabo de reservar el tour "${reservaData.tour.nombre}" para el ${formatearFecha(reservaData.fecha)} con Jaguar Expeditions. ¡Va a ser increíble! 🌟`);
            window.open(`https://wa.me/?text=${texto}`, '_blank');
        }

        function abrirInstagram() {
            window.open('https://www.instagram.com/jaguarexpeditions/', '_blank');
        }
    </script>
</body>
</html>
